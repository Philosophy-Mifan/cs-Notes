## Part 1 鸟哥的Linux笔记

### Prologue Q&A

1.1 你在主机上面安装了一块网卡，但是开机之后，系统却无法使用，你确定网卡是好的，那么可能的问题出在哪里？该如何解决？
1.2 一个操作系统至少能够完整地控制整个硬件，请问，操作系统应该要控制硬件的哪些单元
1.3 我在Windows上面玩的游戏，可不可以拿到Linux去玩？
1.4 Linux本身仅是一个内核与相关的内核工具而已，不过，它已经可以驱动所有的硬件，所以，可以算是一个很普通的操作系统了，经过其他应用程序的开发之后，被整合成为Linux发行版，请问众多的发行版之间，有何异同？
1.5 UNIX是谁写出来的？GNU计划是谁发起的？
1.6 GNU的全名是什么？它主要由哪个基金会支持？
1.7 何谓多用户（Multi-user)、多任务（Multitask)?
1.8 简单说明GNU General Public License(GPL)与开源的精神。
1.9 什么是POSIX？为何说Linux使用POSIX对于发展有很好的影响？
1.10 简单说明Linux成功的因素。

### Chapter 1 计算机概论&Linux基础

- 计算机是接受用户输入的命令与数据，经由中央处理器的算术与逻辑单元运算处理后，产生或存储成有用的信息。
- 整台主机的重点在于中央处理器(Central Procession Unit)，CPU作为一个具有特定功能的芯片，里面含有指令集。
- CPU内又可分为两个主要的单元：算术逻辑单元和控制单元。
- 数据都是通过内存再流出去的，数据会流出/流进内存则是由CPU所发出的命令控制。
- 最常见的两种指令集：精简指令集(RISC)和复杂指令集(CISC)。
- 精简指令集(Reduced Instruction Set Computer)：指令集较为精简，每个指令的运行时间都很短，完成的操作也很简单，指令的执行性能较佳，但若要做复杂的事情，则需由多个指令来完成。目前使用范围最广的CPU可能就是ARM这种架构。
- 复杂指令集(Complex Instruction Set Computer)：CISC在指令集的每个小指令可以执行一些较低级的硬件操作，指令数目多而且复杂，每条指令的长度并不相同。指令执行较为复杂，所以每条指令花费的时间较长，但每个单条指令可以处理的工作较为丰富。
- 个人电脑常被称为x86架构电脑，在2003年以前由Intel所开发的x86架构CPU由8位升级到16、32位，后来AMD以及修改架构修改新一代的CPU为64位，64位的个人电脑CPU又被统称为x86-64架构。
- 位(bit)是CPU一次读取数据的最大量，64位CPU代表CPU一次可以读写64位的数据，一般32位的CPU所能读写的最大数据量大概就是4GB。
- 早期的芯片组通常分为两个网桥来控制各个组件的通信，分别是：北桥、南桥。
- 北桥：负责连接速度较快的CPU、内存与显卡等组件。在目前主流架构中大多数将北桥的内存控制器整合到了CPU中。
- 南桥：负责连接速度较慢的设备接口，包括硬盘、USB设备、网卡等。
- 频率就是CPU每秒钟可以进行的工作次数。
- 所谓的外频指的是CPU与外部组件进行数据传输时的速度，倍频则是CPU内部用来加速工作性能的一个倍数，两者相乘才是CPU的频率速度。
- 超频：将CPU的倍频或外频通过主板提供的设置功能更改成较高频率的一种方式，一般被超频的是外频。
- 连接CPU与内存、显卡的控制器的设计，Intel使用QPI(Quick Path Interconnect)与DMI技术，AMD使用Hyper Transport技术，这些技术能直接让CPU与内存、先发等设备分别进行通信，不再使用外部的连接芯片。
- CPU中的内存控制芯片与内存间的传输速度：前端总线速度(Front Side Bus,FSB)。
- CPU每次能够处理的数据量称为字长(word size)。
- 个人电脑的内存主要组件为动态随机存取内存(Dynamic Random Access Memory)。
- DDR是所谓的双倍数据传输速度(Double Data Rate)。
- 以服务器来说，内存的容量有时比CPU的速度还重要。
- BIOS(Basic Input Output System)是一个程序，这个程序是写死到主板上面的一个存储芯片中，这个存储芯片在没有通电时也能够记录数据，这就是只读存储器(Read Only Memory,ROM)。
- 显卡又称为VGA(Video Graphics Array(视频图形阵列))，显存的容量将会影响到你的屏幕分辨率与颜色深度。
- 早期一些3D的运算任务是由CPU完成，后来显卡厂商直接在显卡上嵌入一个3D加速的芯片，这就是所谓的GPU的由来。
- PCIe(PCI-Express)使用的是类似管道的概念来处理。
- HDMI可以同时传输影像与声音。
- 硬盘是由许许多多的圆形硬盘、机械手臂、磁头与主轴马达所组成的。
- 小区块就是磁盘的最小物理存储单位，称之为扇区(sector)，同一个同心圆的扇区组合成的圆就是所谓的磁道(track)。所有碟片上面的同一个磁道可以组合成所谓的柱面(cylinder)。
- SATA(Serial Advanced Technology Attachment)
- 每秒读写操作次数(Input/Output Operations Per Second,IOPS)这个数值越大，代表可操作次数越高，当然性能越好。
- ->IRQ中断请求
- CMOS主要的功能为记录主板上面的重要参数，包括系统时间、CPU电压与频率、各项设备的I/O地址与IRQ等。
- BIOS是写入到主板上某一块flash或EEPROM的程序，在计算机启动的时候执行，以加载CMOS当中的参数，并尝试调用存储设备中的引导程序，进一步进入操作系统中。
- 常用的英文编码表是ASCII系统，中文当中的编码系统早期最常用的事Big5编码(台湾地区)，GB2312或GBK编码方案(大陆)。
- 为了解决硬件方面老是需要重复编写句柄的问题，所以就有操作系统的出现。
- 操作系统其实也是一组程序，该组程序的重点在于管理电脑的所有活动以及驱动系统中的所有硬件。
- 内核(Kernal)程序放置到内存当中的区域是受保护的，并且启动后就一直常驻在内存当中。
- 只要硬件不同，内核就得要进行修改才行。
- 操作系统的内核层直接参考硬件规格写成，所以同一个操作系统程序不能够在不一样的硬件架构下运行。
- 操作系统只是管理整个硬件资源，包括CPU、内存、输入输出设备及文件系统等。
- 应用程序的开发都是参考操作系统提供的API，所以该应用程序只能在该操作系统上面运行，不能在其他操作系统上运行。
- 内核功能：系统调用接口(System call interface)、进程管理(Process control)、内存管理(Memory management)、文件系统管理(Filesystem management)和设备驱动(Device drivers)。
- 操作系统必须要能够驱动硬件，如此应用程序才能够使用该硬件功能。
- 最普通的操作系统仅在驱动与管理硬件，使用硬件时，需要通过应用软件或是壳程序(Shell)，来调用操作系统硬件工作。
- Linux是开源(Open Source)的操作系统，它的程序代码可以被修改成适合在各种硬件架构上面运行，Linux具有可移植性。
- 兼容分时系统(Compatible Time-Sharing System,CTSS)：让大型主机通过提供数个终端(Terminal)以连接进入主机，利用主机的资源进行运算工作。

### Chapter 2 主机规划与硬盘分区

- 各个组件或设备在Linux下面都是一个文件，几乎所有的硬件设备文件都在`/dev`这个目录内。
- 正常的物理机器大概使用的都是`/dev/sd[a-p]`的磁盘文件名，在虚拟机环境中，为了加速可能就会使用`/dev/vd[a-p]`这种设备文件名。
- 主引导记录(Master Boot Record,MBR)：可以安装启动引导程序的地方。
- 分区表(partition table):记录整块硬盘分区的状态。
- 所谓的分区只是针对分区表进行设置而已。
- 硬盘默认的分区表仅能写入四组分区信息，我们称为主要(Primary)或扩展(Extend)分区。
- 分区的最小单位为柱面(Cylinder)。
- 当系统要写入磁盘时，一定会参考磁盘分区表，才能针对某个分区进行数据的的处理。
- 扩展分区的目的是使用额外的扇区来记录分区信息，扩展分区本身并不能被拿来格式化。
- 由扩展分区继续切出来的分区被称为逻辑分区(logical partition)，逻辑分区的设备名称号码由5开始。
- 主要分区与扩展分区最多可以有4个(硬盘的限制)，扩展分区最多只能有1个，逻辑分区是由扩展分区持续划分出来的分区。
- 能够被格式化后作为数据存取的分区是主要分区与逻辑分区、扩展分区无法格式化。
- 在过去MBR分区表的限制中操作系统无法使用2.2TB以上的磁盘容量，且仅有一个区块，若被破坏后无法或很难恢复。
- 为了解决分区问题提出了GPT(GUID partition table)磁盘分区的格式。
- 逻辑区块地址(Logical Block Address,LBA)GBT将所有区块以此LBA(默认为512字节)来规划，而第一个LBA称为LBA0。GBT除了前面34个LBA之外，整个磁盘的最后34个LBA也拿来作为另一个备份。
- LBA0(MBR兼容区块):存储了第一阶段的启动引导程序。
- LBA1(GPT表头记录):记录了分区表本身的位置与大小，同时记录了备份用的GPT分区放置的位置。
- LBA2-33(实际记录分区信息处):每个LBA都可以记录4组分区记录，所以在默认的情况下，总共有4x32的分区记录，GPT在魅族记录中分别提供了64位来记载开始/结束的扇区号码。
- GPT分区默认可以提供多达128组记录，针对单一磁盘来说，Linux通过udev等方式已经没有分区限制，且GPT分区不再有MBR所谓的主、扩展、逻辑分区的概念，每一组记录单独存在，每个都能被视为主要分区，每一个分区都可以拿来格式化使用。
- BIOS是计算机系统会主动执行的第一个程序，然后依据用户的设置去取得能够启动的硬盘，到该硬盘里面去读取第一个扇区的MBR位置，MBR这个仅有446字节的硬盘容量里面会放置最基本的启动引导程序，这个程序的目的实在加载(load)内核文件。
- 整个Linux系统最重要的地方就是在于目录树架构(directory tree)以根目录为主，整个目录树架构最重要的就是根目录(root directory)，其表示方式为一条斜线"/"。
- 如何结合目录树的架构与磁盘内的数据？答案是挂载(mount)，挂载：利用一个目录当做进入点，将磁盘分区的数据放置在该目录下，也就是进入该目录就可以读取该分区。

